<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" font-size="24" font-weight="bold" text-anchor="middle" fill="#6B21A8">ThreadHer Architecture</text>
  
  <!-- User -->
  <g id="user">
    <circle cx="100" cy="100" r="30" fill="#EC4899" opacity="0.2"/>
    <text x="100" y="105" font-size="30" text-anchor="middle">ðŸ‘¤</text>
    <text x="100" y="145" font-size="12" text-anchor="middle" font-weight="bold">User</text>
  </g>
  
  <!-- Frontend -->
  <g id="frontend">
    <rect x="200" y="70" width="120" height="80" rx="8" fill="#E9D5FF" stroke="#9333EA" stroke-width="2"/>
    <text x="260" y="95" font-size="14" font-weight="bold" text-anchor="middle">Frontend</text>
    <text x="260" y="112" font-size="11" text-anchor="middle">HTML/CSS/JS</text>
    <text x="260" y="127" font-size="11" text-anchor="middle">Tailwind</text>
    <text x="260" y="142" font-size="10" text-anchor="middle" fill="#6B21A8">S3 + CloudFront</text>
  </g>
  
  <!-- Arrow 1 -->
  <path d="M 130 100 L 200 100" stroke="#6B21A8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="165" y="95" font-size="10" fill="#6B21A8">Upload image</text>
  
  <!-- API Gateway -->
  <g id="api-gateway">
    <rect x="200" y="200" width="120" height="70" rx="8" fill="#FDE68A" stroke="#F59E0B" stroke-width="2"/>
    <text x="260" y="225" font-size="14" font-weight="bold" text-anchor="middle">API Gateway</text>
    <text x="260" y="242" font-size="11" text-anchor="middle">REST API</text>
    <text x="260" y="259" font-size="10" text-anchor="middle" fill="#D97706">/chat + /upload-url</text>
  </g>
  
  <!-- Arrow 2 -->
  <path d="M 260 150 L 260 200" stroke="#6B21A8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="270" y="180" font-size="10" fill="#6B21A8">POST request</text>
  
  <!-- Lambda Upload -->
  <g id="lambda-upload">
    <rect x="380" y="170" width="140" height="60" rx="8" fill="#DBEAFE" stroke="#3B82F6" stroke-width="2"/>
    <text x="450" y="192" font-size="13" font-weight="bold" text-anchor="middle">Upload Lambda</text>
    <text x="450" y="209" font-size="10" text-anchor="middle">Image to S3</text>
    <text x="450" y="223" font-size="9" text-anchor="middle" fill="#2563EB">Python 3.11</text>
  </g>
  
  <!-- Lambda API Handler -->
  <g id="lambda-api">
    <rect x="380" y="260" width="140" height="70" rx="8" fill="#DBEAFE" stroke="#3B82F6" stroke-width="2"/>
    <text x="450" y="280" font-size="13" font-weight="bold" text-anchor="middle">APIHandler Lambda</text>
    <text x="450" y="297" font-size="10" text-anchor="middle">Process Requests</text>
    <text x="450" y="314" font-size="9" text-anchor="middle" fill="#2563EB">Claude Vision + Agent</text>
  </g>
  
  <!-- Arrow 3 -->
  <path d="M 320 220 L 380 200" stroke="#6B21A8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="350" y="210" font-size="9" fill="#6B21A8">Upload</text>
  
  <!-- Arrow 4 -->
  <path d="M 320 250 L 380 280" stroke="#6B21A8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="350" y="268" font-size="9" fill="#6B21A8">Analyze</text>
  
  <!-- S3 -->
  <g id="s3">
    <rect x="380" y="370" width="140" height="70" rx="8" fill="#D1FAE5" stroke="#10B981" stroke-width="2"/>
    <text x="450" y="395" font-size="14" font-weight="bold" text-anchor="middle">Amazon S3</text>
    <text x="450" y="412" font-size="11" text-anchor="middle">Image Storage</text>
    <text x="450" y="429" font-size="9" text-anchor="middle" fill="#059669">threadher-images-2025</text>
  </g>
  
  <!-- Arrow Upload to S3 -->
  <path d="M 450 230 L 450 370" stroke="#10B981" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="460" y="305" font-size="10" fill="#10B981">Store image</text>
  
  <!-- Arrow API reads S3 -->
  <path d="M 450 330 L 450 370" stroke="#10B981" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)"/>
  <text x="460" y="355" font-size="9" fill="#10B981">Read image</text>
  
  <!-- Bedrock Agent -->
  <g id="bedrock">
    <rect x="580" y="230" width="180" height="130" rx="8" fill="#FCE7F3" stroke="#EC4899" stroke-width="2"/>
    <text x="670" y="255" font-size="14" font-weight="bold" text-anchor="middle">Amazon Bedrock</text>
    <text x="670" y="275" font-size="12" text-anchor="middle">Bedrock Agent</text>
    <text x="670" y="293" font-size="11" text-anchor="middle">Claude 3.5 Sonnet</text>
    <rect x="590" y="305" width="160" height="45" rx="4" fill="#FDF2F8" stroke="#EC4899"/>
    <text x="670" y="320" font-size="9" text-anchor="middle">â€¢ Image analysis</text>
    <text x="670" y="332" font-size="9" text-anchor="middle">â€¢ Garment classification</text>
    <text x="670" y="344" font-size="9" text-anchor="middle">â€¢ Sustainability metrics</text>
  </g>
  
  <!-- Arrow to Bedrock -->
  <path d="M 520 295 L 580 295" stroke="#EC4899" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="550" y="290" font-size="10" fill="#EC4899">Invoke</text>
  
  <!-- Response arrows -->
  <path d="M 580 305 L 520 305" stroke="#9333EA" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="550" y="320" font-size="10" fill="#9333EA">AI response</text>
  
  <path d="M 380 280 L 320 260" stroke="#9333EA" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="350" y="280" font-size="9" fill="#9333EA">Return JSON</text>
  
  <path d="M 260 200 L 260 150" stroke="#9333EA" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="270" y="175" font-size="9" fill="#9333EA">Display</text>
  
  <path d="M 200 110 L 130 110" stroke="#9333EA" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="165" y="125" font-size="9" fill="#9333EA">Show result</text>
  
  <!-- Data Flow -->
  <g id="legend">
    <rect x="50" y="480" width="700" height="100" rx="8" fill="#F9FAFB" stroke="#D1D5DB" stroke-width="1"/>
    <text x="400" y="505" font-size="14" font-weight="bold" text-anchor="middle">Data Flow</text>
    
    <text x="70" y="530" font-size="11" font-weight="bold">1. User uploads image â†’</text>
    <text x="70" y="545" font-size="10">Frontend converts to base64</text>
    
    <text x="250" y="530" font-size="11" font-weight="bold">2. API Gateway â†’</text>
    <text x="250" y="545" font-size="10">Routes to Lambdas</text>
    
    <text x="410" y="530" font-size="11" font-weight="bold">3. Lambdas â†’</text>
    <text x="410" y="545" font-size="10">Upload S3, call Bedrock</text>
    
    <text x="590" y="530" font-size="11" font-weight="bold">4. Bedrock â†’</text>
    <text x="590" y="545" font-size="10">Analyze & respond</text>
    
    <text x="70" y="565" font-size="11" font-weight="bold">5. Response flows back â†’</text>
    <text x="70" y="578" font-size="10">Lambda â†’ API Gateway â†’ Frontend â†’ User</text>
  </g>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#6B21A8"/>
    </marker>
  </defs>
</svg>